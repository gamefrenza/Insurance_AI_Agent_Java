# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ ä¸‰æ­¥å¯åŠ¨

### ç¬¬ä¸€æ­¥ï¼šæ£€æŸ¥å‰ç½®æ¡ä»¶

ç¡®ä¿å·²å®‰è£…ï¼š
- âœ… Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- âœ… Maven 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬

æ£€æŸ¥ç‰ˆæœ¬ï¼š
```bash
java -version
mvn -version
```

### ç¬¬äºŒæ­¥ï¼šè®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

**Windows PowerShell:**
```powershell
$env:OPENAI_API_KEY="sk-your-api-key-here"
$env:AES_SECRET_KEY="YourSecretKey32CharactersLong!"
```

**Linux/Mac:**
```bash
export OPENAI_API_KEY="sk-your-api-key-here"
export AES_SECRET_KEY="YourSecretKey32CharactersLong!"
```

> **æ³¨æ„**ï¼šå¦‚æœä¸è®¾ç½® OPENAI_API_KEYï¼Œç³»ç»Ÿä¼šä½¿ç”¨é»˜è®¤å“åº”æœºåˆ¶å·¥ä½œã€‚

### ç¬¬ä¸‰æ­¥ï¼šè¿è¡Œåº”ç”¨

**æ–¹å¼Aï¼šä½¿ç”¨å¯åŠ¨è„šæœ¬**

Windows:
```powershell
.\run.ps1
```

Linux/Mac:
```bash
chmod +x run.sh
./run.sh
```

**æ–¹å¼Bï¼šç›´æ¥ä½¿ç”¨Maven**
```bash
mvn spring-boot:run
```

åº”ç”¨å°†åœ¨ä»¥ä¸‹åœ°å€å¯åŠ¨ï¼š**http://localhost:8080/api/v1**

---

## ğŸ§ª æµ‹è¯•åº”ç”¨

### å¿«é€Ÿå¥åº·æ£€æŸ¥

**Windows PowerShell:**
```powershell
Invoke-RestMethod -Uri "http://localhost:8080/api/v1/insurance/health"
```

**Linux/Mac:**
```bash
curl http://localhost:8080/api/v1/insurance/health
```

### å‘é€æµ‹è¯•è¯·æ±‚

**Windows PowerShell:**
```powershell
$body = @{
    customer = @{
        age = 25
        vehicle = "ç‰¹æ–¯æ‹‰Model 3"
        address = "åŒ—äº¬å¸‚æœé˜³åŒº"
        insuranceType = "auto"
        name = "å¼ ä¸‰"
        email = "zhangsan@example.com"
    }
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8080/api/v1/insurance/process" `
    -Method Post `
    -ContentType "application/json" `
    -Body $body | ConvertTo-Json -Depth 10
```

**Linux/Mac:**
```bash
curl -X POST http://localhost:8080/api/v1/insurance/process \
  -H "Content-Type: application/json" \
  -d '{
    "customer": {
      "age": 25,
      "vehicle": "ç‰¹æ–¯æ‹‰Model 3",
      "address": "åŒ—äº¬å¸‚æœé˜³åŒº",
      "insuranceType": "auto",
      "name": "å¼ ä¸‰",
      "email": "zhangsan@example.com"
    }
  }' | jq '.'
```

### è¿è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•

**Windows:**
```powershell
.\test-api.ps1
```

**Linux/Mac:**
```bash
chmod +x test-api.sh
./test-api.sh
```

---

## ğŸ“‹ å“åº”ç¤ºä¾‹

```json
{
  "sessionId": "ABC123...",
  "quote": {
    "premiumAmount": 1560.0,
    "currency": "USD",
    "coverageDetails": "ç»¼åˆæ±½è½¦ä¿é™©ï¼ŒåŒ…å«è´£ä»»é™©ã€ç¢°æ’é™©å’Œç»¼åˆä¿éšœ...",
    "validUntil": "2024-11-03"
  },
  "underwriting": {
    "decision": "APPROVED",
    "riskLevel": "MEDIUM",
    "reasoning": "åŸºäºè‰¯å¥½çš„é£é™©è¯„ä¼°æ‰¹å‡†ç”³è¯·...",
    "riskScore": 0.45
  },
  "document": {
    "documentId": "AUT-20241004120000-abc12345",
    "documentUrl": "https://docs.insurance-agent.com/auto/AUT-...",
    "documentType": "Auto Insurance Policy",
    "status": "PENDING_SIGNATURE"
  },
  "status": "SUCCESS",
  "message": "ä¿é™©è¯·æ±‚å¤„ç†æˆåŠŸ",
  "timestamp": "2024-10-04T12:00:00"
}
```

---

## ğŸ¯ æ”¯æŒçš„ä¿é™©ç±»å‹

| ç±»å‹ | å€¼ | å¿…å¡«å­—æ®µ | å¯é€‰å­—æ®µ |
|------|-------|----------|---------|
| æ±½è½¦ä¿é™© | `"auto"` | age, address | vehicle |
| æˆ¿å±‹ä¿é™© | `"home"` | age, address | propertyType, propertyValue |
| äººå¯¿ä¿é™© | `"life"` | age, address | occupation, smoker |
| å¥åº·ä¿é™© | `"health"` | age, address | medicalHistory |

---

## ğŸ” API ç«¯ç‚¹

| æ–¹æ³• | ç«¯ç‚¹ | æè¿° |
|------|------|------|
| POST | `/insurance/process` | å¤„ç†ä¿é™©è¯·æ±‚ |
| GET | `/insurance/health` | å¥åº·æ£€æŸ¥ |
| GET | `/insurance/session` | è·å–ä¼šè¯ä¿¡æ¯ |
| DELETE | `/insurance/session` | æ¸…é™¤ä¼šè¯ |

---

## âš™ï¸ é…ç½®

ç¼–è¾‘ `src/main/resources/application.yml` è¿›è¡Œè‡ªå®šä¹‰ï¼š

```yaml
server:
  port: 8080  # ä¿®æ”¹ç«¯å£

openai:
  api:
    model: gpt-4  # ä¿®æ”¹AIæ¨¡å‹
    temperature: 0.7  # è°ƒæ•´åˆ›é€ æ€§

insurance:
  quoting:
    base-rate:
      auto: 1200.0  # è°ƒæ•´åŸºç¡€è´¹ç‡
```

---

## ğŸ“Š æ—¥å¿—

æ—¥å¿—ä¿å­˜ä½ç½®ï¼š`logs/insurance-agent.log`

æŸ¥çœ‹æ—¥å¿—ï¼š
```bash
tail -f logs/insurance-agent.log
```

---

## â“ æ•…éšœæ’é™¤

### ç«¯å£ 8080 å·²è¢«å ç”¨
åœ¨ `application.yml` ä¸­ä¿®æ”¹ç«¯å£ï¼š
```yaml
server:
  port: 8081
```

### OpenAI API é”™è¯¯
- æ£€æŸ¥ API key æ˜¯å¦æ­£ç¡®
- éªŒè¯ API é…é¢
- å¦‚æœ API ä¸å¯ç”¨ï¼Œç³»ç»Ÿä¼šä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ

### æ„å»ºé”™è¯¯
```bash
mvn clean install -U
```

### ä»æœ‰é—®é¢˜ï¼Ÿ
æŸ¥çœ‹ `logs/insurance-agent.log` è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚

---

## ğŸ“š åç»­æ­¥éª¤

1. âœ… é˜…è¯» [README.md](README.md) è·å–å®Œæ•´æ–‡æ¡£
2. âœ… æŸ¥çœ‹ [PROJECT_STRUCTURE.md](PROJECT_STRUCTURE.md) äº†è§£æ¶æ„ç»†èŠ‚
3. âœ… æ ¹æ®éœ€æ±‚ä¿®æ”¹ `application.yml`
4. âœ… ä¸å‰ç«¯åº”ç”¨é›†æˆ
5. âœ… éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼ˆå‚è§ README.mdï¼‰

---

## ğŸ’¡ æç¤º

- ä½¿ç”¨æä¾›çš„ `example-request.json` è¿›è¡Œæµ‹è¯•
- ä¼šè¯æ•°æ®ä¿æŒ 30 åˆ†é’Ÿ
- æ‰€æœ‰æ•æ„Ÿæ•°æ®éƒ½ç»è¿‡åŠ å¯†ï¼ˆç¬¦åˆGDPRï¼‰
- å‘é€è¯·æ±‚å‰æ£€æŸ¥å¥åº·ç«¯ç‚¹
- æŸ¥çœ‹æ—¥å¿—è¿›è¡Œè°ƒè¯•

---

## ğŸ“– é¡¹ç›®ç‰¹æ€§

### âœ… æ•°æ®æ”¶é›†
é€šè¿‡ REST APIï¼ˆPOST /processï¼‰æ¥æ”¶å®¢æˆ·ä¿¡æ¯ï¼ˆJSONæ ¼å¼ï¼‰

### âœ… æ¨¡å—åŒ–è®¾è®¡
- **QuotingService**ï¼šæŠ¥ä»·ç”Ÿæˆ
- **UnderwritingService**ï¼šæ‰¿ä¿å†³ç­–
- **DocumentFillingService**ï¼šæ–‡ä»¶å¡«å†™
- æ‰€æœ‰æœåŠ¡æ³¨å…¥åˆ°ä¸» AgentController

### âœ… AIæ¨ç†
- é€šè¿‡ OkHttp è°ƒç”¨ OpenAI GPT-4 API
- å¯¹è¯å¼å¤„ç†å’Œå†³ç­–æ”¯æŒ
- æ™ºèƒ½é£é™©è¯„ä¼°

### âœ… ä¸Šä¸‹æ–‡ç®¡ç†
- ä½¿ç”¨ Spring Session å­˜å‚¨ç”¨æˆ·ä¼šè¯ä¸Šä¸‹æ–‡
- 30åˆ†é’Ÿä¼šè¯è¶…æ—¶
- æ”¯æŒå¹¶å‘ä¼šè¯

### âœ… åˆè§„æ€§
- SLF4J æ—¥å¿—è®°å½•
- AES æ•°æ®åŠ å¯†ï¼ˆjavax.cryptoï¼‰
- ç¬¦åˆ GDPR æ ‡å‡†
- æ•æ„Ÿæ•°æ®è„±æ•

### âœ… JSON å“åº”
åŒ…å«å®Œæ•´çš„å¤„ç†ç»“æœï¼š
- æŠ¥ä»·ä¿¡æ¯ï¼ˆé‡‘é¢ã€å¸ç§ã€ä¿éšœè¯¦æƒ…ï¼‰
- æ‰¿ä¿å†³ç­–ï¼ˆæ‰¹å‡†/æ‹’ç»/å¾…å®šï¼‰
- æ–‡æ¡£é“¾æ¥ï¼ˆIDã€URLã€çŠ¶æ€ï¼‰

---

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### æ ¸å¿ƒæ¡†æ¶
- Java 17
- Spring Boot 3.1.5
- Maven

### ä¸»è¦ä¾èµ–
- spring-boot-starter-web
- spring-boot-starter-validation
- spring-session-core
- okhttp3
- jackson-databind
- lombok

### åŠŸèƒ½ç‰¹æ€§
- RESTful API
- AI é›†æˆï¼ˆOpenAI GPT-4ï¼‰
- æ•°æ®åŠ å¯†ï¼ˆAES-256ï¼‰
- ä¼šè¯ç®¡ç†
- å…¨é¢æ—¥å¿—è®°å½•
- é”™è¯¯å¤„ç†

---

## ğŸ“ å­¦ä¹ èµ„æº

### Spring Boot æ ¸å¿ƒæ¦‚å¿µ
- **Controller**ï¼šå¤„ç† HTTP è¯·æ±‚
- **Service**ï¼šåŒ…å«ä¸šåŠ¡é€»è¾‘
- **Model**ï¼šå®šä¹‰æ•°æ®ç»“æ„
- **Configuration**ï¼šåº”ç”¨é…ç½®

### è®¾è®¡æ¨¡å¼
- **ä¾èµ–æ³¨å…¥**ï¼šSpring ç®¡ç†å¯¹è±¡ç”Ÿå‘½å‘¨æœŸ
- **æœåŠ¡å±‚æ¨¡å¼**ï¼šä¸šåŠ¡é€»è¾‘åˆ†ç¦»
- **DTOæ¨¡å¼**ï¼šè¯·æ±‚/å“åº”æ¨¡å‹
- **æ„å»ºè€…æ¨¡å¼**ï¼šLombok @Builder

---

**ç¥ç¼–ç¨‹æ„‰å¿«ï¼ ğŸ‰**

